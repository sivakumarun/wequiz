// Get user's current rank from leaderboard
async function getUserRank() {
    try {
        const response = await fetch(`${API_BASE_URL}/leaderboard`);
        const leaderboard = await response.json();
        
        // Find user's position
        const userIndex = leaderboard.findIndex(u => u._id === currentUser._id);
        if (userIndex === -1) return '-';
        
        // Calculate rank with tie-breaker logic
        let rank = 1;
        const currentUserData = leaderboard[userIndex];
        
        for (let i = 0; i < userIndex; i++) {
            const prevUser = leaderboard[i];
            
            // Only increment rank if the previous user has different points OR different response time
            if (prevUser.points !== currentUserData.points || 
                prevUser.avgResponseTime !== currentUserData.avgResponseTime) {
                rank++;
            }
        }
        
        return `#${rank}`;
    } catch (error) {
        console.error('Error fetching rank:', error);
        return '-';
    }
}
